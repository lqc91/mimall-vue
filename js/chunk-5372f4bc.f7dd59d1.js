(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-5372f4bc"],{"24bd":function(t,e,i){},"2c69":function(t,e,i){"use strict";i.r(e);var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order-confirm"},[i("order-header",{attrs:{title:"订单确认",tip:"请正确填写收货地址"}}),i("div",{staticClass:"wrap"},[i("svg",{staticStyle:{position:"absolute",width:"0px",height:"0px",overflow:"hidden"},attrs:{version:"1.1",xmlns:"http://www.w3.org/2000/svg","xmlns:xlink":"http://www.w3.org/1999/xlink"}},[i("defs",[i("symbol",{attrs:{id:"icon-add",viewBox:"0 0 31 32"}},[i("title",[t._v("add")]),i("path",{staticClass:"path1",attrs:{d:"M30.745 15.152h-14.382v-14.596c0-0.308-0.243-0.557-0.543-0.557s-0.543 0.249-0.543 0.557v14.596h-14.665c-0.3 0-0.543 0.249-0.543 0.557s0.243 0.557 0.543 0.557h14.665v15.177c0 0.307 0.243 0.557 0.543 0.557s0.543-0.249 0.543-0.557v-15.177h14.382c0.3 0 0.543-0.249 0.543-0.557s-0.243-0.557-0.543-0.557z"}})]),i("symbol",{attrs:{id:"icon-edit",viewBox:"0 0 32 32"}},[i("title",[t._v("edit")]),i("path",{staticClass:"path1",attrs:{d:"M28.287 8.51l-4.805-4.806 0.831-0.831c0.472-0.472 1.086-0.777 1.564-0.777 0.248 0 0.452 0.082 0.622 0.253l3.143 3.144c0.539 0.54 0.133 1.529-0.524 2.186l-0.831 0.831zM26.805 9.992l-1.138 1.138-4.805-4.806 1.138-1.138 4.805 4.806zM24.186 12.612l-14.758 14.762-4.805-4.806 14.758-14.762 4.805 4.806zM7.379 28.288l-4.892 1.224 1.223-4.894 3.669 3.67zM31.123 4.011l-3.143-3.144c-0.567-0.567-1.294-0.867-2.103-0.867-1.036 0-2.174 0.52-3.045 1.391l-20.429 20.436c-0.135 0.134-0.23 0.302-0.276 0.487l-2.095 8.385c-0.089 0.355 0.017 0.736 0.276 0.995 0.198 0.198 0.461 0.307 0.741 0.307 0.085 0 0.171-0.010 0.254-0.031l8.381-2.096c0.185-0.047 0.354-0.142 0.487-0.276l20.43-20.436c1.409-1.41 2.042-3.632 0.524-5.15v0z"}})]),i("symbol",{attrs:{id:"icon-del",viewBox:"0 0 32 32"}},[i("title",[t._v("delete")]),i("path",{staticClass:"path1",attrs:{d:"M11.355 4.129v-2.065h9.29v2.065h-9.29zM6.194 29.935v-23.742h19.613v23.742h-19.613zM30.968 4.129h-8.258v-3.097c0-0.569-0.463-1.032-1.032-1.032h-11.355c-0.569 0-1.032 0.463-1.032 1.032v3.097h-8.258c-0.569 0-1.032 0.463-1.032 1.032s0.463 1.032 1.032 1.032h3.097v24.774c0 0.569 0.463 1.032 1.032 1.032h21.677c0.569 0 1.032-0.463 1.032-1.032v-24.774h3.097c0.569 0 1.032-0.463 1.032-1.032s-0.463-1.032-1.032-1.032v0z"}}),i("path",{staticClass:"path2",attrs:{d:"M10.323 9.806c-0.569 0-1.032 0.463-1.032 1.032v14.452c0 0.569 0.463 1.032 1.032 1.032s1.032-0.463 1.032-1.032v-14.452c0-0.569-0.463-1.032-1.032-1.032z"}}),i("path",{staticClass:"path3",attrs:{d:"M16 9.806c-0.569 0-1.032 0.463-1.032 1.032v14.452c0 0.569 0.463 1.032 1.032 1.032s1.032-0.463 1.032-1.032v-14.452c0-0.569-0.463-1.032-1.032-1.032z"}}),i("path",{staticClass:"path4",attrs:{d:"M21.677 9.806c-0.569 0-1.032 0.463-1.032 1.032v14.452c0 0.569 0.463 1.032 1.032 1.032s1.032-0.463 1.032-1.032v-14.452c0-0.569-0.463-1.032-1.032-1.032z"}})])])]),i("div",{staticClass:"container"},[i("div",{staticClass:"address"},[i("p",{staticClass:"title"},[t._v("收获地址")]),i("ul",{staticClass:"list"},[t._l(t.addrList,(function(e,s){return i("li",{key:s,staticClass:"item",class:{checked:s==t.checkedIndex},on:{click:function(e){t.checkedIndex=s}}},[i("p",{staticClass:"name"},[t._v(t._s(e.receiverName))]),i("p",{staticClass:"tel"},[t._v(t._s(e.receiverMobile))]),i("p",{staticClass:"addr"},[t._v(t._s(e.receiverProvince+" "+e.receiverCity+" "+e.receiverDistrict+" "+e.receiverAddress))]),i("p",{staticClass:"action"},[i("svg",{staticClass:"icon icon-del",on:{click:function(i){return t.delAddr(e)}}},[i("use",{attrs:{"xlink:href":"#icon-del"}})]),i("svg",{staticClass:"icon icon-edit",on:{click:function(i){return t.editAddrModal(e)}}},[i("use",{attrs:{"xlink:href":"#icon-edit"}})])])])})),i("li",{staticClass:"item"},[i("a",{staticClass:"addr-add",attrs:{href:"javascript:;"},on:{click:t.openAddrModal}},[i("p",{staticClass:"icon-add"}),i("p",[t._v("添加新地址")])])])],2)]),i("div",{staticClass:"product"},[i("p",{staticClass:"title"},[t._v("商品")]),i("ul",{staticClass:"list"},t._l(t.cartList,(function(e,s){return i("li",{key:s,staticClass:"item"},[i("a",{staticClass:"link",attrs:{href:"javascript:;"}},[i("p",{staticClass:"name"},[i("img",{directives:[{name:"lazy",rawName:"v-lazy",value:e.productMainImage,expression:"item.productMainImage"}],staticClass:"picture",attrs:{alt:"item.productName"}}),i("span",[t._v(t._s(e.productName+" "+e.productSubtitle))])]),i("p",[t._v(t._s(e.productPrice)+"元×"+t._s(e.quantity))]),i("p",{staticClass:"product-total-price"},[t._v(t._s(e.productTotalPrice)+"元")])])])})),0)]),i("div",{staticClass:"detail clearfix"},[t._m(0),i("ul",{staticClass:"list-right"},[i("li",[i("p",{staticClass:"name"},[t._v("商品件数：")]),i("p",{staticClass:"content"},[t._v(t._s(t.count)+"件")])]),i("li",[i("p",{staticClass:"name"},[t._v("商品总价：")]),i("p",{staticClass:"content"},[t._v(t._s(t.cartTotalPrice)+"元")])]),t._m(1),t._m(2),i("li",[i("p",{staticClass:"name"},[t._v("应付总额：")]),i("p",{staticClass:"content"},[i("span",{staticClass:"total-price"},[t._v(t._s(t.cartTotalPrice))]),t._v("元 ")])])])]),i("div",{staticClass:"btn-group"},[i("router-link",{staticClass:"btn btn-large btn-base",attrs:{to:"/cart"}},[t._v("返回购物车")]),i("button",{staticClass:"btn btn-large",on:{click:t.orderSubmit}},[t._v("去结算")])],1)]),i("modal",{attrs:{title:"添加收货地址",btnType:"3",confirmTxt:"保存",showModal:t.showEditModal},on:{cancel:function(e){t.showEditModal=!1},submit:t.submitAddr},scopedSlots:t._u([{key:"modal-body",fn:function(){return[i("div",{staticClass:"edit-wrap"},[i("div",{staticClass:"item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverName,expression:"checkedItem.receiverName"}],staticClass:"input",attrs:{type:"text",placeholder:"姓名"},domProps:{value:t.checkedItem.receiverName},on:{input:function(e){e.target.composing||t.$set(t.checkedItem,"receiverName",e.target.value)}}}),i("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverMobile,expression:"checkedItem.receiverMobile"}],staticClass:"input",attrs:{type:"text",placeholder:"手机号"},domProps:{value:t.checkedItem.receiverMobile},on:{input:function(e){e.target.composing||t.$set(t.checkedItem,"receiverMobile",e.target.value)}}})]),i("div",{staticClass:"item"},[i("select",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverProvince,expression:"checkedItem.receiverProvince"}],attrs:{name:"province"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.checkedItem,"receiverProvince",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"北京"}},[t._v("北京")]),i("option",{attrs:{value:"天津"}},[t._v("天津")]),i("option",{attrs:{value:"河北"}},[t._v("河北")])]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverCity,expression:"checkedItem.receiverCity"}],attrs:{name:"city"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.checkedItem,"receiverCity",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"北京市"}},[t._v("北京市")]),i("option",{attrs:{value:"天津市"}},[t._v("天津市")]),i("option",{attrs:{value:"石家庄市"}},[t._v("石家庄")])]),i("select",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverDistrict,expression:"checkedItem.receiverDistrict"}],attrs:{name:"district"},on:{change:function(e){var i=Array.prototype.filter.call(e.target.options,(function(t){return t.selected})).map((function(t){var e="_value"in t?t._value:t.value;return e}));t.$set(t.checkedItem,"receiverDistrict",e.target.multiple?i:i[0])}}},[i("option",{attrs:{value:"昌平区"}},[t._v("昌平区")]),i("option",{attrs:{value:"海淀区"}},[t._v("海淀区")]),i("option",{attrs:{value:"东城区"}},[t._v("东城区")]),i("option",{attrs:{value:"西城区"}},[t._v("西城区")]),i("option",{attrs:{value:"顺义区"}},[t._v("顺义区")]),i("option",{attrs:{value:"房山区"}},[t._v("房山区")])])]),i("div",{staticClass:"item"},[i("textarea",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverAddress,expression:"checkedItem.receiverAddress"}],staticClass:"textarea",attrs:{name:"street",placeholder:"详细地址"},domProps:{value:t.checkedItem.receiverAddress},on:{input:function(e){e.target.composing||t.$set(t.checkedItem,"receiverAddress",e.target.value)}}})]),i("div",{staticClass:"item"},[i("input",{directives:[{name:"model",rawName:"v-model",value:t.checkedItem.receiverZip,expression:"checkedItem.receiverZip"}],staticClass:"input",attrs:{type:"text",placeholder:"邮编"},domProps:{value:t.checkedItem.receiverZip},on:{input:function(e){e.target.composing||t.$set(t.checkedItem,"receiverZip",e.target.value)}}})])])]},proxy:!0}])}),i("modal",{attrs:{title:"删除确认",btnType:"1",showModal:t.showDelModal},on:{cancel:function(e){t.showDelModal=!1},submit:t.submitAddr},scopedSlots:t._u([{key:"modal-body",fn:function(){return[i("p",[t._v("您确定要删除此地址吗？")])]},proxy:!0}])})],1)],1)},a=[function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("ul",{staticClass:"list-left"},[i("li",{staticClass:"item"},[i("p",{staticClass:"title"},[t._v("配送方式")]),i("p",[i("span",[t._v("包邮")])])]),i("li",{staticClass:"item"},[i("p",{staticClass:"title"},[t._v("发票")]),i("p",[i("span",[t._v("电子发票")]),i("span",[t._v("个人")]),i("span",[t._v("商品明细")])])])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",[i("p",{staticClass:"name"},[t._v("优惠活动：")]),i("p",{staticClass:"content"},[t._v("0元")])])},function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("li",[i("p",{staticClass:"name"},[t._v("运费：")]),i("p",{staticClass:"content"},[t._v("0元")])])}],r=(i("4de4"),i("d81d"),i("fb6a"),i("c3d4")),c=i("714b"),n={name:"order-confirm",components:{OrderHeader:r["a"],Modal:c["a"]},data:function(){return{addrList:[],cartList:[],cartTotalPrice:0,count:0,checkedItem:{},userAction:"",showDelModal:!1,showEditModal:!1,checkedIndex:0}},mounted:function(){this.getAddrList(),this.getCartList()},methods:{getAddrList:function(){var t=this;this.axios.get("/shippings").then((function(e){t.addrList=e.list.reverse().slice(0,3)}))},openAddrModal:function(){this.userAction=0,this.checkedItem={receiverProvince:"北京",receiverCity:"北京市",receiverDistrict:"昌平区"},this.showEditModal=!0},editAddrModal:function(t){this.userAction=1,this.checkedItem=t,this.showEditModal=!0},delAddr:function(t){this.checkedItem=t,this.userAction=2,this.showDelModal=!0},submitAddr:function(){var t,e,i,s=this,a=this.checkedItem,r=this.userAction;if(0===r?(t="post",e="/shippings"):1===r?(t="put",e="/shippings/".concat(a.id)):(t="delete",e="/shippings/".concat(a.id)),0===r||1===r){var c=a.receiverName,n=a.receiverMobile,o=a.receiverProvince,l=a.receiverCity,d=a.receiverDistrict,v=a.receiverAddress,u=a.receiverZip,p="";if(c?n&&/\d{11}/.test(n)?o?l?d?v?u&&/\d{6}/.test(u)||(p="请输入正确的邮编"):p="请输入收货人详细地址":p="请输入收货人所在区县":p="请输入收货人所在城市":p="请输入收货人所在省份":p="请输入正确的手机号":p="请输入收货人名称",p)return void this.$message.error(p);i={receiverName:c,receiverMobile:n,receiverProvince:o,receiverCity:l,receiverDistrict:d,receiverAddress:v,receiverZip:u}}this.axios[t](e,i).then((function(){s.closeModal(),s.getAddrList(),s.$message.success("操作成功")}))},closeModal:function(){this.checkedItem={},this.userAction="",this.showDelModal=!1,this.showEditModal=!1},getCartList:function(){var t=this;this.axios.get("/carts").then((function(e){var i=e.cartProductVoList;t.cartTotalPrice=e.cartTotalPrice,t.cartList=i.filter((function(t){return t.productSelected})),t.cartList.map((function(e){t.count+=e.quantity}))}))},orderSubmit:function(){var t=this,e=this.addrList[this.checkedIndex];e?this.axios.post("/orders",{shippingId:e.id}).then((function(e){t.$router.push({path:"/order/pay",query:{orderNo:e.orderNo}})})):this.$message.error("请选择收货地址")}}},o=n,l=(i("2ca1"),i("2877")),d=Object(l["a"])(o,s,a,!1,null,"054b52e1",null);e["default"]=d.exports},"2ca1":function(t,e,i){"use strict";var s=i("24bd"),a=i.n(s);a.a},6209:function(t,e,i){"use strict";var s=i("b1bf"),a=i.n(s);a.a},b1bf:function(t,e,i){},c3d4:function(t,e,i){"use strict";var s=function(){var t=this,e=t.$createElement,i=t._self._c||e;return i("div",{staticClass:"order-header"},[i("div",{staticClass:"container clearfix"},[i("div",{staticClass:"header-logo"},[i("router-link",{staticClass:"icon-logo",attrs:{to:"/index"}})],1),i("div",{staticClass:"title"},[i("h2",{staticClass:"name"},[t._v(t._s(t.title))]),i("span",{staticClass:"tip"},[t._v(t._s(t.tip))])]),i("a",{staticClass:"username",attrs:{href:"javascript:;"}},[t._v(t._s(t.username))])])])},a=[],r=(i("a4d3"),i("4de4"),i("e439"),i("dbb4"),i("b64b"),i("159b"),i("ade3")),c=i("08c1");function n(t,e){var i=Object.keys(t);if(Object.getOwnPropertySymbols){var s=Object.getOwnPropertySymbols(t);e&&(s=s.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),i.push.apply(i,s)}return i}function o(t){for(var e=1;e<arguments.length;e++){var i=null!=arguments[e]?arguments[e]:{};e%2?n(Object(i),!0).forEach((function(e){Object(r["a"])(t,e,i[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(i)):n(Object(i)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(i,e))}))}return t}var l={name:"order-header",props:{title:String,tip:String},computed:o({},Object(c["c"])(["username"]))},d=l,v=(i("6209"),i("2877")),u=Object(v["a"])(d,s,a,!1,null,"2ef36412",null);e["a"]=u.exports},d81d:function(t,e,i){"use strict";var s=i("23e7"),a=i("b727").map,r=i("d039"),c=i("1dde"),n=c("map"),o=n&&!r((function(){[].map.call({length:-1,0:1},(function(t){throw t}))}));s({target:"Array",proto:!0,forced:!n||!o},{map:function(t){return a(this,t,arguments.length>1?arguments[1]:void 0)}})}}]);